<%- include('../partials/_head.ejs') %>
<%- include('../partials/_navbar.ejs') %>
<body class="auth-bg">
  <div class="auth-center-container">
    <% if (checkVar === 1) { %>
      <div class="update-profile-box">
        <h2 class="update-profile-title"><i class="fa fa-key"></i> Change Password</h2>
        <form class="update-profile-form" action="/user/<%= user._id %>/user?_method=PUT" method="POST">
          <label for="username">Username</label>
          <input type="text" id="username" name="username" value="<%= user.username %>" disabled>
          <label for="currentPassword">Current Password</label>
          <input type="password" id="currentPassword" name="currentPassword" required>
          <label for="newPassword">New Password</label>
          <input type="password" id="newPassword" name="newPassword" required>
          <label for="confirmPassword">Confirm Password</label>
          <input type="password" id="confirmPassword" name="confirmPassword" required>
          <div style="display: flex; gap: 1rem; margin-top: 1.2rem;">
            <button class="update-profile-btn" type="submit" name="submit" value="Change Password">
              <i class="fa fa-save"></i> Change Password
            </button>
            <a href="/user/<%= user._id %>/dashboard" class="update-profile-btn cancel-btn">
              <i class="fa fa-times"></i> Cancel
            </a>
          </div>
        </form>
      </div>
    <% } else if (checkVar === 0) { %>
      <div class="update-profile-box">
        <h2 class="update-profile-title"><i class="fa fa-user-edit"></i> Edit Profile</h2>
        <form class="update-profile-form" action="/user/<%= user._id %>/user?_method=PUT" method="POST">
          <label for="username">Username</label>
          <input type="text" id="username" name="username" value="<%= user.username %>" disabled>
          <label for="email">Email</label>
          <input type="email" id="email" name="email" value="<%= user.email %>" required>
          <label for="contactNo">Contact No.</label>
          <input type="number" id="contactNo" name="contactNo" value="<%= user.contactNo %>" required>
          <div style="display: flex; gap: 1rem; margin-top: 1.2rem;">
            <button class="update-profile-btn" type="submit" name="submit" value="Update Profile">
              <i class="fa fa-save"></i> Update Profile
            </button>
            <a href="/user/<%= user._id %>/dashboard" class="update-profile-btn cancel-btn">
              <i class="fa fa-times"></i> Cancel
            </a>
          </div>
        </form>
      </div>
    <% } else if (checkVar === 2) { %>
      <div class="update-profile-box">
        <h2 class="update-profile-title"><i class="fa fa-image"></i> Update Profile Picture</h2>
        
        <img src="/uploads/<%= user.profile %>" alt="Profile" class="update-profile-avatar">
        
        <form class="update-profile-form" action="/user/<%= user._id %>/changePic" method="POST" enctype="multipart/form-data">
          <label for="profile">Profile Image</label>
          <input type="file" name="profile" id="profile" accept="image/*" required>
          <div style="display: flex; gap: 1rem; margin-top: 1.2rem;">
            <button class="update-profile-btn" type="submit" name="submit" value="Update Picture">
              <i class="fa fa-save"></i> Update Picture
            </button>
            <a href="/user/<%= user._id %>/dashboard" class="update-profile-btn cancel-btn">
              <i class="fa fa-times"></i> Cancel
            </a>
          </div>
        </form>
      </div>
    <% } %>
  </div>
  <%- include('../partials/_footer.ejs') %>
</body>
<style>

